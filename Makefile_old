.Phony: all clean clean_frames

CXX = g++
LIBS = -lavcodec -lavformat -lavutil

INCLUDES += -I ./src/Utils
INCLUDES += -I ./src/Player

BIN_PATH = bin
BUILD_PATH = build
SRC_PATH = src

CFLAGS = -Wall
LDFLAGS = -Wall
# CFLAGS += -g -fsanitize=leak
# LDFLAGS += -g -fsanitize=leak

all: $(BIN_PATH)/main

$(BIN_PATH)/main2: $(BUILD_PATH)/main2.o $(BUILD_PATH)/player.o $(BUILD_PATH)/player_utils.o
	$(CXX) $(CFLAGS) $^ -o $@ $(LIBS) $(INCLUDES)

$(BUILD_PATH)/main2.o: $(SRC_PATH)/main2.cpp
	$(CXX) $(LDFLAGS) $< -c -o $@ $(INCLUDES)

$(BUILD_PATH)/player.o: $(SRC_PATH)/Player_v2/player.cpp
	$(CXX) $(LDFLAGS) $< -c -o $@ $(INCLUDES)

$(BUILD_PATH)/player_utils.o: $(SRC_PATH)/Player_v2/player_utils.cpp
	$(CXX) $(LDFLAGS) $< -c -o $@ $(INCLUDES)

clean:
	rm build/*.o bin/main

clean_frames:
	rm bin/*.yuv